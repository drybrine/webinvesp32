(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6694],{2676:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>w});var t=a(5155),l=a(2115),d=a(5695),i=a(8482),r=a(7168),n=a(9852),c=a(9074),m=a(4186),o=a(1788),x=a(1482),u=a(9676),h=a(7108),j=a(7924),p=a(3580),g=a(2464),f=a(8524),N=a(8145),v=a(5784);function b(e){let{scans:s,loading:a=!1}=e,[d,i]=(0,l.useState)(""),[c,u]=(0,l.useState)("all"),[h,p]=(0,l.useState)("all"),g=Array.from(new Set(s.map(e=>e.deviceId))),b=s.filter(e=>{let s=""===d||e.barcode.toLowerCase().includes(d.toLowerCase())||e.productName&&e.productName.toLowerCase().includes(d.toLowerCase())||e.deviceId.toLowerCase().includes(d.toLowerCase()),a="all"===c||e.deviceId===c,t="all"===h||"found"===h&&e.itemFound||"notfound"===h&&!e.itemFound;return s&&a&&t}),w=e=>e?new Date(e).toLocaleString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"Unknown";return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,t.jsx)("div",{className:"flex-1 w-full sm:max-w-md",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(j.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),(0,t.jsx)(n.p,{placeholder:"Cari barcode atau produk...",value:d,onChange:e=>i(e.target.value),className:"pl-9"})]})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.A,{className:"h-4 w-4 text-gray-500"}),(0,t.jsxs)(v.l6,{value:c,onValueChange:u,children:[(0,t.jsx)(v.bq,{className:"w-[180px]",children:(0,t.jsx)(v.yv,{placeholder:"Filter Device"})}),(0,t.jsxs)(v.gC,{children:[(0,t.jsx)(v.eb,{value:"all",children:"Semua Device"}),g.map(e=>(0,t.jsx)(v.eb,{value:e,children:e},e))]})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)(v.l6,{value:h,onValueChange:p,children:[(0,t.jsx)(v.bq,{className:"w-[180px]",children:(0,t.jsx)(v.yv,{placeholder:"Filter Status"})}),(0,t.jsxs)(v.gC,{children:[(0,t.jsx)(v.eb,{value:"all",children:"Semua Status"}),(0,t.jsx)(v.eb,{value:"found",children:"Ditemukan"}),(0,t.jsx)(v.eb,{value:"notfound",children:"Tidak Ditemukan"})]})]})}),(0,t.jsx)(r.$,{variant:"outline",size:"icon",onClick:()=>{let e=new Blob([["Barcode,Device,Timestamp,Status,Product,Location",...b.map(e=>[e.barcode,e.deviceId,w(e.timestamp),e.itemFound?"Found":"Not Found",e.productName||"",e.location||""].map(e=>'"'.concat(e,'"')).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(e),a=document.createElement("a");a.setAttribute("href",s),a.setAttribute("download","scan_history_".concat(new Date().toISOString().split("T")[0],".csv")),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},title:"Export to CSV",children:(0,t.jsx)(o.A,{className:"h-4 w-4"})})]})]}),(0,t.jsx)("div",{className:"border rounded-md",children:(0,t.jsxs)(f.XI,{children:[(0,t.jsx)(f.A0,{children:(0,t.jsxs)(f.Hj,{children:[(0,t.jsx)(f.nd,{children:"Barcode"}),(0,t.jsx)(f.nd,{children:"Waktu"}),(0,t.jsx)(f.nd,{children:"Device"}),(0,t.jsx)(f.nd,{children:"Status"}),(0,t.jsx)(f.nd,{children:"Produk"}),(0,t.jsx)(f.nd,{children:"Lokasi"})]})}),(0,t.jsx)(f.BF,{children:a?(0,t.jsx)(f.Hj,{children:(0,t.jsx)(f.nA,{colSpan:6,className:"text-center py-8",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,t.jsx)("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin mb-2"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Memuat data..."})]})})}):0===b.length?(0,t.jsx)(f.Hj,{children:(0,t.jsx)(f.nA,{colSpan:6,className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-gray-500",children:"Tidak ada data pemindaian"})})}):b.map(e=>(0,t.jsxs)(f.Hj,{children:[(0,t.jsx)(f.nA,{className:"font-mono",children:e.barcode}),(0,t.jsx)(f.nA,{className:"whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(m.A,{className:"w-4 h-4 text-gray-500"}),w(e.timestamp)]})}),(0,t.jsx)(f.nA,{children:e.deviceId}),(0,t.jsx)(f.nA,{children:(0,t.jsx)(N.E,{variant:e.itemFound?"default":"secondary",children:e.itemFound?"Ditemukan":"Tidak Ada"})}),(0,t.jsx)(f.nA,{children:e.productName||"-"}),(0,t.jsx)(f.nA,{children:e.location||"-"})]},e.id))})]})})]})}function w(){(0,d.useRouter)();let{scans:e,addScan:s,loading:a,error:f}=(0,g.V6)(),{items:N,loading:v,error:w}=(0,g.j6)(),{toast:y}=(0,p.dj)(),k=(0,l.useMemo)(()=>v||!N?e.map(e=>({...e,productName:"Memuat..."})):e.map(e=>{let s=N.find(s=>s.id===e.itemId||s.barcode===e.barcode);return{...e,productName:(null==s?void 0:s.name)||void 0}}),[e,N,v]);return a||v?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-4 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Memuat riwayat pemindaian..."})]})}):f||w?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-4 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-center text-red-600",children:(0,t.jsxs)("p",{children:["Gagal memuat data: ",("string"==typeof f?f:null==f?void 0:f.message)||("string"==typeof w?w:null==w?void 0:w.message)]})})}):(0,t.jsx)("div",{className:"min-h-screen gradient-surface p-3 sm:p-4 md:p-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-6 sm:mb-8 md:mb-10 text-center md:text-left animate-fade-in-up",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center md:justify-start mb-4 sm:mb-6 gap-3 sm:gap-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute -inset-1 gradient-primary rounded-full blur opacity-30 animate-pulse"}),(0,t.jsx)("div",{className:"relative w-10 h-10 sm:w-12 sm:h-12 md:w-16 md:h-16 gradient-secondary rounded-full flex items-center justify-center shadow-colored",children:(0,t.jsx)(u.A,{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 text-white animate-float"})})]}),(0,t.jsxs)("div",{className:"text-center md:text-left",children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold gradient-text tracking-tight",children:"Riwayat Transaksi"}),(0,t.jsx)("p",{className:"text-xs sm:text-sm md:text-base lg:text-lg text-muted-foreground font-medium mt-1 sm:mt-2",children:"Pantau aktivitas scan dan transaksi inventaris"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center md:justify-start space-x-4",children:[(0,t.jsx)("div",{className:"h-1 w-16 gradient-secondary rounded-full animate-pulse"}),(0,t.jsx)("div",{className:"h-1 w-8 gradient-primary rounded-full animate-pulse animation-delay-200"}),(0,t.jsx)("div",{className:"h-1 w-4 gradient-accent rounded-full animate-pulse animation-delay-400"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 md:gap-8 mb-8 sm:mb-10 animate-fade-in-up animation-delay-200",children:[(0,t.jsxs)(i.Zp,{className:"glass-card card-hover shadow-medium hover:shadow-colored transition-all duration-500 group",children:[(0,t.jsx)("div",{className:"absolute inset-0 gradient-primary opacity-5 rounded-xl"}),(0,t.jsx)(i.aR,{className:"relative z-10 pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(i.ZB,{className:"text-sm font-semibold text-muted-foreground",children:"Total Scan"}),(0,t.jsx)("div",{className:"p-2 gradient-primary rounded-lg shadow-sm",children:(0,t.jsx)(u.A,{className:"h-4 w-4 text-white"})})]})}),(0,t.jsx)(i.Wu,{className:"relative z-10 pt-0",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-2xl sm:text-3xl font-bold gradient-text",children:k.length}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground font-medium",children:"Semua waktu"}),(0,t.jsx)("div",{className:"w-full bg-muted/50 rounded-full h-1",children:(0,t.jsx)("div",{className:"gradient-primary h-1 rounded-full w-full animate-pulse"})})]})})]}),(0,t.jsxs)(i.Zp,{className:"glass-card card-hover shadow-medium hover:shadow-colored transition-all duration-500 group",children:[(0,t.jsx)("div",{className:"absolute inset-0 gradient-secondary opacity-5 rounded-xl"}),(0,t.jsx)(i.aR,{className:"relative z-10 pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(i.ZB,{className:"text-sm font-semibold text-muted-foreground",children:"Hari Ini"}),(0,t.jsx)("div",{className:"p-2 gradient-secondary rounded-lg shadow-sm",children:(0,t.jsx)(c.A,{className:"h-4 w-4 text-white"})})]})}),(0,t.jsx)(i.Wu,{className:"relative z-10 pt-0",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-2xl sm:text-3xl font-bold gradient-text",children:k.filter(e=>new Date(e.timestamp).toDateString()===new Date().toDateString()).length}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground font-medium",children:"Scan hari ini"}),(0,t.jsx)("div",{className:"w-full bg-muted/50 rounded-full h-1",children:(0,t.jsx)("div",{className:"gradient-secondary h-1 rounded-full w-3/4 animate-pulse"})})]})})]}),(0,t.jsxs)(i.Zp,{className:"glass-card card-hover shadow-medium hover:shadow-colored transition-all duration-500 group",children:[(0,t.jsx)("div",{className:"absolute inset-0 gradient-accent opacity-5 rounded-xl"}),(0,t.jsx)(i.aR,{className:"relative z-10 pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(i.ZB,{className:"text-sm font-semibold text-muted-foreground",children:"Scan Berhasil"}),(0,t.jsx)("div",{className:"p-2 gradient-accent rounded-lg shadow-sm",children:(0,t.jsx)(h.A,{className:"h-4 w-4 text-white"})})]})}),(0,t.jsx)(i.Wu,{className:"relative z-10 pt-0",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-2xl sm:text-3xl font-bold gradient-text",children:k.filter(e=>e.productName&&"Memuat..."!==e.productName).length}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground font-medium",children:"Item ditemukan"}),(0,t.jsx)("div",{className:"w-full bg-muted/50 rounded-full h-1",children:(0,t.jsx)("div",{className:"bg-emerald-500 h-1 rounded-full w-4/5 animate-pulse"})})]})})]}),(0,t.jsxs)(i.Zp,{className:"glass-card card-hover shadow-medium hover:shadow-colored transition-all duration-500 group",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-orange-500 opacity-5 rounded-xl"}),(0,t.jsx)(i.aR,{className:"relative z-10 pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(i.ZB,{className:"text-sm font-semibold text-muted-foreground",children:"Status Real-time"}),(0,t.jsx)("div",{className:"p-2 bg-orange-500 rounded-lg shadow-sm",children:(0,t.jsx)(m.A,{className:"h-4 w-4 text-white"})})]})}),(0,t.jsx)(i.Wu,{className:"relative z-10 pt-0",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-lg sm:text-xl font-bold text-orange-600",children:k.length>0?"Aktif":"Standby"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground font-medium",children:k.length>0?"Ada aktivitas":"Menunggu scan"}),(0,t.jsx)("div",{className:"w-full bg-muted/50 rounded-full h-1",children:(0,t.jsx)("div",{className:"h-1 rounded-full ".concat(k.length>0?"bg-orange-500 animate-pulse":"bg-gray-400"," transition-all duration-300"),style:{width:k.length>0?"90%":"30%"}})})]})})]})]}),(0,t.jsxs)(i.Zp,{className:"glass-card shadow-large hover:shadow-extra-large transition-all duration-500 animate-fade-in-up animation-delay-600",children:[(0,t.jsxs)(i.aR,{className:"p-6 sm:p-8",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.ZB,{className:"text-2xl font-bold gradient-text",children:"Riwayat Transaksi"}),(0,t.jsx)(i.BT,{className:"text-sm text-muted-foreground mt-2 font-medium",children:"Pantau semua aktivitas scan barang real-time"})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,t.jsxs)(r.$,{variant:"outline",className:"glass-card hover:shadow-medium btn-modern font-semibold",children:[(0,t.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Export Data"]}),(0,t.jsxs)(r.$,{variant:"outline",className:"glass-card hover:shadow-medium btn-modern font-semibold",children:[(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Filter"]})]})]}),(0,t.jsxs)("div",{className:"mt-6 relative",children:[(0,t.jsx)(j.A,{className:"absolute left-4 top-4 h-5 w-5 text-muted-foreground"}),(0,t.jsx)(n.p,{placeholder:"Cari berdasarkan barcode, nama produk, atau ID...",className:"pl-12 h-12 glass-card border-0 shadow-medium focus:shadow-large transition-all duration-300 font-medium"})]})]}),(0,t.jsx)(i.Wu,{className:"p-6 sm:p-8 pt-0",children:0===k.length?(0,t.jsxs)("div",{className:"text-center py-16 sm:py-20",children:[(0,t.jsxs)("div",{className:"relative mx-auto mb-6",children:[(0,t.jsx)("div",{className:"absolute -inset-1 gradient-primary rounded-full blur opacity-20"}),(0,t.jsx)("div",{className:"relative w-20 h-20 mx-auto glass-card rounded-full flex items-center justify-center shadow-large",children:(0,t.jsx)(h.A,{className:"h-10 w-10 text-muted-foreground"})})]}),(0,t.jsx)("h3",{className:"text-xl font-bold text-foreground mb-3",children:"Belum ada riwayat transaksi"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-2 font-medium",children:"Riwayat scan barang masuk dan keluar akan muncul di sini"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground/70",children:"Mulai scan barcode untuk melihat aktivitas real-time"})]}):(0,t.jsx)(b,{scans:k})})]})]})})}},3987:(e,s,a)=>{Promise.resolve().then(a.bind(a,2676))},6889:(e,s,a)=>{"use strict";a.d(s,{Jl:()=>t.A,rX:()=>d.A,yQ:()=>l.A});var t=a(5196),l=a(6474),d=a(7863)}},e=>{var s=s=>e(e.s=s);e.O(0,[6209,8779,4313,5180,9290,622,2432,7979,1899,9744,2322,9592,7940,2652,5030,465,3719,408,9741,9473,9219,7499,7358],()=>s(3987)),_N_E=e.O()}]);