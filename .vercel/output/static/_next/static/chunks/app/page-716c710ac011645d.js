(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{1319:(e,a,t)=>{Promise.resolve().then(t.bind(t,3758))},3758:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>R});var s=t(5155),i=t(2115),r=t(5695),l=t(8482),n=t(7168),c=t(9852),d=t(2714),o=t(5784),m=t(9840),u=t(9026),x=t(8145),h=t(8524),p=t(5339),g=t(5868),v=t(1788),j=t(3717),b=t(2657),N=t(1482),f=t(7712),y=t(7108),w=t(4616),k=t(7924),S=t(6767),C=t(2525),A=t(6517),T=t(4449),D=t(3580),I=t(2464),E=t(8915),L=t(4130),q=t.n(L);function R(){var e,a;(0,r.useRouter)();let{items:t,loading:L,error:R,addItem:J,updateItem:F,deleteItem:B}=(0,I.j6)(),{scans:P,loading:H,error:$}=(0,I.V6)(),{devices:z,loading:K,error:M,lastUpdate:U,connectionStatus:O,refresh:Z,onlineDevices:G,offlineDevices:Q,totalDevices:_}=function(){let[e,a]=(0,i.useState)([]),[t,s]=(0,i.useState)(!0),[r,l]=(0,i.useState)(null),[n,c]=(0,i.useState)(new Date),[d,o]=(0,i.useState)("connecting"),m=(0,i.useRef)(new Map),u=(0,i.useRef)(null),x=(0,i.useRef)(null),h=(0,i.useRef)(0),p=(0,i.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null,s=null;try{("connected"!==d||e)&&o("connecting"),t=new AbortController,s=setTimeout(()=>{t&&t.abort()},1e4);let i=await fetch("/api/check-device-status",{method:"POST",headers:{"Content-Type":"application/json","X-Internal-Call":"true"},signal:t.signal});if(s&&(clearTimeout(s),s=null),!i.ok)throw Error("HTTP ".concat(i.status,": ").concat(i.statusText));let r=await i.json();if(o("connected"),l(null),c(new Date),h.current=0,r.deviceDetails)try{let e=await fetch("/api/devices-status");if(e.ok){let t=((await e.json()).devices||[]).map(e=>{let a=r.deviceDetails.find(a=>a.deviceId===e.deviceId);return{...e,status:a?a.currentStatus:e.status,lastSeen:a?a.mostRecentTimestamp:e.lastSeen}}),s=[];t.forEach(e=>{let a=m.current.get(e.deviceId);a&&a!==e.status&&s.push({deviceId:e.deviceId,previousStatus:a,newStatus:e.status,timestamp:Date.now(),ipAddress:e.ipAddress}),m.current.set(e.deviceId,e.status)}),s.forEach(e=>{let a="online"===e.newStatus;(0,D.oR)({title:a?"Perangkat Terhubung":"Perangkat Terputus",description:"".concat(e.deviceId," ").concat(a?"online":"offline"),variant:a?"default":"destructive"})}),a(t)}else{let e=r.deviceDetails.map(e=>({deviceId:e.deviceId,status:e.currentStatus,ipAddress:"",lastSeen:e.mostRecentTimestamp,scanCount:0,lastHeartbeat:e.lastHeartbeat,name:e.deviceId}));a(e)}}catch(t){console.warn("Failed to fetch complete device data, using basic status info:",t);let e=r.deviceDetails.map(e=>({deviceId:e.deviceId,status:e.currentStatus,ipAddress:"",lastSeen:e.mostRecentTimestamp,scanCount:0,lastHeartbeat:e.lastHeartbeat,name:e.deviceId}));a(e)}return e&&r.updatedDevices>0&&(0,D.oR)({title:"Status Diperbarui",description:"".concat(r.updatedDevices," perangkat diperbarui (").concat(r.onlineDevices," online, ").concat(r.offlineDevices," offline)")}),r}catch(a){throw s&&(clearTimeout(s),s=null),a instanceof Error&&"AbortError"===a.name?(console.log("Request timeout - device status check aborted after 5 seconds"),Date.now()-n.getTime()>15e3?(o("disconnected"),l("Connection timeout"),setTimeout(()=>{a instanceof Error&&"AbortError"===a.name&&l(null)},1e4),e&&(0,D.oR)({title:"Koneksi Timeout",description:"Pemeriksaan status perangkat melebihi batas waktu",variant:"destructive"})):console.log("Timeout occurred but keeping previous connection state due to recent successful update")):(console.error("Device status check failed:",a),o("disconnected"),l(a instanceof Error?a.message:"Failed to check device status"),h.current++,e&&h.current<=3&&(0,D.oR)({title:"Koneksi Terputus",description:"Gagal memeriksa status perangkat (percobaan ".concat(h.current,"/").concat(3,")"),variant:"destructive"})),a}finally{s&&clearTimeout(s)}},[]),g=(0,i.useCallback)(async()=>{try{return await p(!1)}catch(e){throw console.error("Failed to fetch device data:",e),e}},[p]),v=(0,i.useCallback)(()=>{u.current&&clearInterval(u.current),p(),u.current=setInterval(async()=>{if("visible"===document.visibilityState)try{await p()}catch(e){if(Date.now()-n.getTime()>3e4&&h.current<3){let e=Math.min(2e3*Math.pow(1.5,h.current),8e3);console.warn("Polling failed, retrying in ".concat(e,"ms...")),u.current&&(clearInterval(u.current),u.current=null),x.current=setTimeout(()=>{v()},e)}else h.current>=3?(console.log("Max retries reached, stopping polling temporarily"),setTimeout(()=>{h.current=0,v()},3e4)):console.log("Polling error but continuing due to recent successful updates")}},7e3)},[p]),j=(0,i.useCallback)(()=>{u.current&&(clearInterval(u.current),u.current=null),x.current&&(clearTimeout(x.current),x.current=null)},[]);return(0,i.useEffect)(()=>{let e=!0;(async()=>{s(!0);try{await p(),e&&v()}catch(e){console.error("Failed to initialize device status:",e)}finally{e&&s(!1)}})();let a=()=>{"visible"===document.visibilityState&&e&&(p(),u.current||v())};document.addEventListener("visibilitychange",a);let t=null,i=()=>{e&&(t&&clearTimeout(t),t=setTimeout(()=>{(0,D.oR)({title:"Koneksi Pulih",description:"Memeriksa status perangkat..."}),h.current=0,p(!0),u.current||v()},1e3))},r=()=>{e&&(t&&clearTimeout(t),t=setTimeout(()=>{o("disconnected"),j(),(0,D.oR)({title:"Koneksi Terputus",description:"Tidak dapat memperbarui status perangkat",variant:"destructive"})},500))};return window.addEventListener("online",i),window.addEventListener("offline",r),()=>{e=!1,j(),t&&clearTimeout(t),document.removeEventListener("visibilitychange",a),window.removeEventListener("online",i),window.removeEventListener("offline",r)}},[p,g,v,j]),(0,i.useEffect)(()=>{"connected"===d&&"Connection timeout"===r&&l(null)},[d,r]),{devices:e,loading:t,error:r,lastUpdate:n,connectionStatus:d,refresh:(0,i.useCallback)(async()=>{try{await p(!0),await g()}catch(e){}},[p,g]),onlineDevices:e.filter(e=>"online"===e.status).length,offlineDevices:e.filter(e=>"offline"===e.status).length,totalDevices:e.length}}(),[V,W]=(0,i.useState)(!1),[X,Y]=(0,i.useState)(null),[ee,ea]=(0,i.useState)(null),[et,es]=(0,i.useState)(null),[ei,er]=(0,i.useState)(""),[el,en]=(0,i.useState)("all"),[ec,ed]=(0,i.useState)("name-asc"),{toast:eo}=(0,D.dj)(),[em,eu]=(0,i.useState)({barcode:"",name:"",description:"",category:"",quantity:0,minStock:5,price:0,supplier:"",location:"",lastUpdated:Date.now()}),ex=(0,i.useMemo)(()=>L||!t?["all"]:["all",...new Set(t.map(e=>e.category).filter(e=>"string"==typeof e&&""!==e.trim()))],[t,L]),eh=(0,E.mM)(),ep=(0,i.useRef)(void 0);if((0,i.useEffect)(()=>{if(!K){let e=ep.current;void 0!==e&&(G>0&&0===e?eo({title:"Pemindai Terhubung",description:"Satu atau lebih pemindai ESP32 kini aktif.",variant:"default"}):0===G&&e>0?eo({title:"Pemindai Terputus",description:"Semua pemindai ESP32 kini tidak aktif.",variant:"destructive"}):G>e?eo({title:"Pemindai Baru Terhubung",description:"Jumlah pemindai aktif bertambah menjadi ".concat(G,"."),variant:"default"}):G<e&&G>0&&eo({title:"Satu Pemindai Terputus",description:"Jumlah pemindai aktif berkurang menjadi ".concat(G,"."),variant:"default"})),ep.current=G}},[G,K,eo]),(0,i.useEffect)(()=>{let e=setInterval(async()=>{if("/"===window.location.pathname&&"visible"===document.visibilityState)try{let e={method:"POST",headers:{"Content-Type":"application/json","X-Internal-Call":"true"}};"undefined"!=typeof AbortSignal&&AbortSignal.timeout&&(e.signal=AbortSignal.timeout(5e3));let a=await fetch("/api/check-device-status",e);a.ok||console.warn("\uD83D\uDD04 Dashboard auto-refresh failed:",a.status,a.statusText)}catch(e){e instanceof Error&&!e.message.includes("timeout")&&console.log("\uD83D\uDD04 Dashboard auto-refresh error:",e.message)}},1e4);return()=>clearInterval(e)},[]),(0,i.useEffect)(()=>{let e=e=>{console.log("\uD83D\uDCE1 Dashboard received device status update:",e.detail)};return window.addEventListener("deviceStatusUpdated",e),()=>{window.removeEventListener("deviceStatusUpdated",e)}},[]),(0,i.useEffect)(()=>{console.log("\uD83D\uDCF1 Dashboard devices update:",{devicesCount:(null==z?void 0:z.length)||0,onlineDevices:G,devices:null==z?void 0:z.map(e=>({deviceId:e.deviceId,status:e.status,lastSeen:e.lastSeen,timeDiff:e.lastSeen?Math.floor((Date.now()-new Date(e.lastSeen).getTime())/1e3):"never"}))})},[z,G]),L||H||K)return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Memuat sistem inventaris..."})]})});let eg=async()=>{if(!em.name||!em.barcode){eo({title:"Kesalahan Validasi",description:"Nama dan barcode wajib diisi",variant:"destructive"});return}let e=t.find(e=>e.barcode&&e.barcode===em.barcode&&""!==em.barcode);if(e){eo({title:"Barcode Sudah Ada",description:"Barcode ".concat(em.barcode," sudah digunakan untuk ").concat(e.name),variant:"destructive"});return}if(t.find(e=>e.name.toLowerCase()===em.name.toLowerCase())){eo({title:"Nama Item Sudah Ada",description:"Item dengan nama ".concat(em.name," sudah ada."),variant:"destructive"});return}try{await J(em),eu({barcode:"",name:"",description:"",category:"",quantity:0,minStock:5,price:0,supplier:"",location:"",lastUpdated:Date.now()}),W(!1),eo({title:"Berhasil",description:"Item berhasil ditambahkan"})}catch(e){eo({title:"Error",description:"Gagal menambahkan item",variant:"destructive"})}},ev=async()=>{if(X){if(X.barcode){let e=t.find(e=>e.id!==X.id&&e.barcode===X.barcode);if(e){eo({title:"Barcode Sudah Ada",description:"Barcode ".concat(X.barcode," sudah digunakan untuk item ").concat(e.name,"."),variant:"destructive"});return}}if(t.find(e=>e.id!==X.id&&e.name.toLowerCase()===X.name.toLowerCase())){eo({title:"Nama Item Sudah Ada",description:"Item dengan nama ".concat(X.name," sudah ada."),variant:"destructive"});return}try{await F(X.id,X),Y(null),eo({title:"Berhasil",description:"Item berhasil diperbarui"})}catch(e){eo({title:"Error",description:"Gagal memperbarui item",variant:"destructive"})}}},ej=async(e,a)=>{if(confirm('Apakah Anda yakin ingin menghapus "'.concat(a,'"?')))try{await B(e),eo({title:"Berhasil",description:"Item berhasil dihapus"})}catch(e){eo({title:"Error",description:"Gagal menghapus item",variant:"destructive"})}},eb=async()=>{if(!et)return;let{itemId:e,amount:a,type:s,currentQuantity:i,itemName:r}=et,l="add"===s?i+a:i-a;if(l<0){eo({title:"Error",description:"Stok tidak boleh kurang dari nol.",variant:"destructive"});return}try{var n,c,d;await F(e,{quantity:l});let i={type:"add"===s?"in":"out",productBarcode:(null===(n=t.find(a=>a.id===e))||void 0===n?void 0:n.barcode)||"N/A",productName:r,quantity:"add"===s?a:-a,unitPrice:(null===(c=t.find(a=>a.id===e))||void 0===c?void 0:c.price)||0,totalAmount:("add"===s?a:-a)*((null===(d=t.find(a=>a.id===e))||void 0===d?void 0:d.price)||0),reason:"Penyesuaian Stok dari Dashboard Inventaris",operator:"Admin"};await E.$J.addTransaction(i),es(null),eo({title:"Berhasil",description:"Stok ".concat(r," ").concat("add"===s?"ditambah":"dikurangi"," sebanyak ").concat(a,". Transaksi dicatat.")})}catch(e){console.error("Error adjusting stock or recording transaction:",e),eo({title:"Error",description:"Gagal mengubah stok atau mencatat transaksi.",variant:"destructive"})}},eN=t.filter(e=>{var a,t;let s=e.name.toLowerCase().includes(ei.toLowerCase())||(null!==(a=e.barcode)&&void 0!==a?a:"").includes(ei)||e.description.toLowerCase().includes(ei.toLowerCase())||e.category.toLowerCase().includes(ei.toLowerCase())||(null!==(t=e.supplier)&&void 0!==t?t:"").toLowerCase().includes(ei.toLowerCase())||e.location.toLowerCase().includes(ei.toLowerCase()),i="all"===el||e.category===el;return s&&i}).sort((e,a)=>{let[t,s]=ec.split("-"),i=0,r="name"===t?e.name.toLowerCase():"quantity"===t?e.quantity:"price"===t?e.price:"category"===t?e.category.toLowerCase():0,l="name"===t?a.name.toLowerCase():"quantity"===t?a.quantity:"price"===t?a.price:"category"===t?a.category.toLowerCase():0;return r>l?i=1:r<l&&(i=-1),"asc"===s?i:-1*i}),ef=t.length,ey=t.reduce((e,a)=>e+a.quantity*a.price,0),ew=t.filter(e=>e.quantity<=e.minStock),ek=()=>{let e=[];for(let a of(e.push("ID,Barcode,Nama,Deskripsi,Kategori,Kuantitas,Stok Min,Harga,Pemasok,Lokasi,Update Terakhir"),eN)){let t=[a.id,a.barcode||"",'"'.concat(a.name.replace(/"/g,'""'),'"'),'"'.concat(a.description.replace(/"/g,'""'),'"'),a.category,a.quantity,a.minStock,a.price,'"'.concat((a.supplier||"").replace(/"/g,'""'),'"'),'"'.concat(a.location.replace(/"/g,'""'),'"'),a.lastUpdated?new Date(a.lastUpdated).toLocaleString():""];e.push(t.join(","))}let a=new Blob([e.join("\n")],{type:"text/csv;charset=utf-8;"}),t="inventaris_".concat(new Date().toISOString().split("T")[0],".csv"),s=document.createElement("a");if(void 0!==s.download){let e=URL.createObjectURL(a);s.setAttribute("href",e),s.setAttribute("download",t),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}eo({title:"Export Berhasil",description:"".concat(eN.length," item diexport ke ").concat(t)})};return(0,s.jsx)("div",{className:"min-h-screen gradient-surface mobile-container-full",children:(0,s.jsxs)("div",{className:"mobile-space-y",children:[(0,s.jsx)("div",{className:"mobile-margin text-center md:text-left animate-fade-in-up",children:(0,s.jsxs)("div",{className:"mobile-flex-col md:items-center md:justify-between mobile-gap",children:[(0,s.jsxs)("div",{className:"mobile-margin md:mb-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center md:justify-start mb-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute -inset-1 gradient-primary rounded-full blur opacity-30 animate-pulse"}),(0,s.jsx)("div",{className:"relative w-10 h-10 sm:w-12 sm:h-12 md:w-16 md:h-16 gradient-primary rounded-full flex items-center justify-center shadow-colored",children:(0,s.jsx)(y.A,{className:"w-4 h-4 sm:w-6 sm:h-6 md:w-8 md:h-8 text-white animate-float"})})]}),(0,s.jsxs)("div",{className:"ml-3 sm:ml-4",children:[(0,s.jsx)("h1",{className:"mobile-title-lg md:text-5xl lg:text-6xl gradient-text tracking-tight",children:"Dashboard Inventaris"}),(0,s.jsx)("p",{className:"mobile-text lg:text-lg text-muted-foreground font-medium mt-1 sm:mt-2",children:"Kelola stok barang dengan teknologi terdepan"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-center md:justify-start mobile-space-x",children:[(0,s.jsx)("div",{className:"h-1 w-12 sm:w-16 gradient-primary rounded-full animate-pulse"}),(0,s.jsx)("div",{className:"h-1 w-6 sm:w-8 gradient-secondary rounded-full animate-pulse animation-delay-200"}),(0,s.jsx)("div",{className:"h-1 w-3 sm:w-4 gradient-accent rounded-full animate-pulse animation-delay-400"})]})]}),(0,s.jsxs)("div",{className:"mobile-flex-wrap justify-center md:justify-end mobile-gap",children:[(0,s.jsxs)(n.$,{onClick:()=>W(!0),className:"mobile-btn gradient-primary text-white shadow-colored hover:shadow-extra-large rounded-xl sm:rounded-2xl font-semibold",children:[(0,s.jsx)(w.A,{className:"w-4 h-4 mr-2"}),(0,s.jsx)("span",{className:"mobile-hide",children:"Tambah Item"}),(0,s.jsx)("span",{className:"desktop-hide",children:"Tambah"})]}),(0,s.jsxs)(n.$,{onClick:ek,variant:"outline",className:"glass-card px-6 py-3 rounded-2xl font-semibold hover:shadow-medium",children:[(0,s.jsx)(v.A,{className:"w-4 h-4 mr-2"}),"Export"]})]})]})}),(0,s.jsxs)("div",{className:"mb-8 space-y-4 animate-fade-in-up animation-delay-200",children:[(0,s.jsx)(u.Fc,{className:"glass-card shadow-medium border-l-4 transition-all duration-300 ".concat(eh.available?"border-l-emerald-500 hover:shadow-large":"border-l-amber-500 hover:shadow-large"),children:(0,s.jsxs)("div",{className:"flex items-center",children:[eh.available?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(A.A,{className:"h-5 w-5 text-emerald-600"}),(0,s.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-emerald-500 rounded-full animate-ping"})]}):(0,s.jsx)(T.A,{className:"h-5 w-5 text-amber-600 animate-pulse"}),(0,s.jsxs)(u.TN,{className:"ml-3 text-sm font-medium",children:[(0,s.jsx)("strong",{className:"text-foreground",children:"Status Backend:"})," ",eh.available?(0,s.jsx)("span",{className:"text-emerald-700 font-semibold",children:"Terhubung - Real-time sync aktif"}):(0,s.jsx)("span",{className:"text-amber-700 font-semibold",children:"Tidak terhubung ke Firebase"})]})]})}),(R||$||M&&"Connection timeout"!==M)&&(0,s.jsxs)(u.Fc,{className:"glass-card shadow-medium border-l-4 border-l-red-500 hover:shadow-large transition-all duration-300",children:[(0,s.jsx)(p.A,{className:"h-5 w-5 text-red-600 animate-pulse"}),(0,s.jsxs)(u.TN,{className:"ml-3 text-sm font-medium",children:[(0,s.jsx)("strong",{className:"text-foreground",children:"Error:"})," ",(0,s.jsx)("span",{className:"text-red-700",children:R||$||M||"Gagal memuat data."})]})]})]}),(0,s.jsxs)("div",{className:"mobile-grid-stats mobile-gap mobile-margin animate-fade-in-up animation-delay-400",children:[(0,s.jsxs)(l.Zp,{className:"glass-card card-hover shadow-medium hover:shadow-colored transition-all duration-500 group",children:[(0,s.jsx)("div",{className:"absolute inset-0 gradient-primary opacity-5 rounded-xl"}),(0,s.jsx)("div",{className:"absolute top-2 right-2 w-8 h-8 sm:w-12 sm:h-12 gradient-primary rounded-full opacity-10 group-hover:opacity-20 transition-opacity duration-300"}),(0,s.jsx)(l.aR,{className:"relative z-10 pb-2 sm:pb-3 p-4 sm:p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(l.ZB,{className:"text-xs sm:text-sm font-semibold text-muted-foreground",children:"Total Item"}),(0,s.jsx)("div",{className:"p-1.5 sm:p-2 gradient-primary rounded-lg shadow-sm",children:(0,s.jsx)(y.A,{className:"h-3 w-3 sm:h-4 sm:w-4 text-white"})})]})}),(0,s.jsx)(l.Wu,{className:"relative z-10 pt-0 px-4 pb-4 sm:px-6 sm:pb-6",children:(0,s.jsxs)("div",{className:"space-y-1 sm:space-y-2",children:[(0,s.jsx)("div",{className:"text-lg sm:text-2xl md:text-3xl font-bold gradient-text",children:ef}),(0,s.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground font-medium",children:"Jenis barang unik"}),(0,s.jsx)("div",{className:"w-full bg-muted/50 rounded-full h-1 mt-2",children:(0,s.jsx)("div",{className:"gradient-primary h-1 rounded-full w-3/4 animate-pulse"})})]})})]}),(0,s.jsxs)(l.Zp,{className:"glass-card card-hover shadow-medium hover:shadow-colored transition-all duration-500 group",children:[(0,s.jsx)("div",{className:"absolute inset-0 gradient-secondary opacity-5 rounded-xl"}),(0,s.jsx)("div",{className:"absolute top-2 right-2 w-8 h-8 sm:w-12 sm:h-12 gradient-secondary rounded-full opacity-10 group-hover:opacity-20 transition-opacity duration-300"}),(0,s.jsx)(l.aR,{className:"relative z-10 pb-2 sm:pb-3 p-4 sm:p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(l.ZB,{className:"text-xs sm:text-sm font-semibold text-muted-foreground",children:"Total Nilai"}),(0,s.jsx)("div",{className:"p-1.5 sm:p-2 gradient-secondary rounded-lg shadow-sm",children:(0,s.jsx)(g.A,{className:"h-3 w-3 sm:h-4 sm:w-4 text-white"})})]})}),(0,s.jsx)(l.Wu,{className:"relative z-10 pt-0 px-4 pb-4 sm:px-6 sm:pb-6",children:(0,s.jsxs)("div",{className:"space-y-1 sm:space-y-2",children:[(0,s.jsxs)("div",{className:"text-lg sm:text-2xl md:text-3xl font-bold gradient-text",children:["Rp ",ey.toLocaleString("id-ID")]}),(0,s.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground font-medium",children:"Nilai inventaris total"}),(0,s.jsx)("div",{className:"w-full bg-muted/50 rounded-full h-1 mt-2",children:(0,s.jsx)("div",{className:"gradient-secondary h-1 rounded-full w-4/5 animate-pulse"})})]})})]}),(0,s.jsxs)(l.Zp,{className:"glass-card card-hover shadow-medium hover:shadow-colored transition-all duration-500 group",children:[(0,s.jsx)("div",{className:"absolute inset-0 ".concat(ew.length>0?"gradient-accent":"bg-emerald-500/10"," opacity-5 rounded-xl")}),(0,s.jsx)("div",{className:"absolute top-2 right-2 w-8 h-8 sm:w-12 sm:h-12 gradient-accent rounded-full opacity-10 group-hover:opacity-20 transition-opacity duration-300"}),(0,s.jsx)(l.aR,{className:"relative z-10 pb-2 sm:pb-3 p-4 sm:p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(l.ZB,{className:"text-xs sm:text-sm font-semibold text-muted-foreground",children:"Stok Rendah"}),(0,s.jsx)("div",{className:"p-1.5 sm:p-2 ".concat(ew.length>0?"gradient-accent":"bg-emerald-500"," rounded-lg shadow-sm"),children:(0,s.jsx)(p.A,{className:"h-3 w-3 sm:h-4 sm:w-4 text-white"})})]})}),(0,s.jsx)(l.Wu,{className:"relative z-10 pt-0 px-4 pb-4 sm:px-6 sm:pb-6",children:(0,s.jsxs)("div",{className:"space-y-1 sm:space-y-2",children:[(0,s.jsx)("div",{className:"text-lg sm:text-2xl md:text-3xl font-bold ".concat(ew.length>0?"text-red-600":"text-emerald-600"),children:ew.length}),(0,s.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground font-medium",children:ew.length>0?"Item perlu diisi ulang":"Semua stok aman"}),ew.length>0&&(0,s.jsx)("div",{className:"mt-3 space-y-2",children:(()=>{let e=ew.filter(e=>0===e.quantity),a=ew.filter(e=>e.quantity>0&&e.quantity<=e.minStock);return(0,s.jsxs)(s.Fragment,{children:[e.length>0&&(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,s.jsx)("span",{className:"text-red-700 font-medium",children:"\uD83D\uDD34 Habis"}),(0,s.jsx)("span",{className:"text-red-600 font-semibold",children:e.length})]}),a.length>0&&(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,s.jsx)("span",{className:"text-orange-700 font-medium",children:"\uD83D\uDFE1 Rendah"}),(0,s.jsx)("span",{className:"text-orange-600 font-semibold",children:a.length})]})]})})()}),(0,s.jsx)("div",{className:"w-full bg-muted/50 rounded-full h-1 mt-2",children:(0,s.jsx)("div",{className:"h-1 rounded-full ".concat(ew.length>0?"bg-gradient-to-r from-red-500 to-orange-500 animate-pulse":"bg-emerald-500"," transition-all duration-300"),style:{width:ew.length>0?"".concat(Math.min(ew.length/Math.max(t.length,1)*100,100),"%"):"100%"}})})]})})]}),(0,s.jsxs)(l.Zp,{className:"glass-card card-hover shadow-medium hover:shadow-colored transition-all duration-500 group",children:[(0,s.jsx)("div",{className:"absolute inset-0 gradient-primary opacity-5 rounded-xl"}),(0,s.jsx)("div",{className:"absolute top-2 right-2 w-8 h-8 sm:w-12 sm:h-12 gradient-primary rounded-full opacity-10 group-hover:opacity-20 transition-opacity duration-300"}),(0,s.jsx)(l.aR,{className:"relative z-10 pb-2 sm:pb-3 p-4 sm:p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(l.ZB,{className:"text-xs sm:text-sm font-semibold text-muted-foreground",children:"Status Device"}),(0,s.jsx)("div",{className:"p-1.5 sm:p-2 gradient-primary rounded-lg shadow-sm",children:(0,s.jsx)(S.A,{className:"h-3 w-3 sm:h-4 sm:w-4 text-white"})})]})}),(0,s.jsx)(l.Wu,{className:"relative z-10 pt-0 px-4 pb-4 sm:px-6 sm:pb-6",children:(0,s.jsxs)("div",{className:"space-y-1 sm:space-y-2",children:[(0,s.jsxs)("div",{className:"text-lg sm:text-2xl md:text-3xl font-bold gradient-text",children:[G,"/",_]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground font-medium",children:G>0?"Scanner siap digunakan":"Semua device offline"}),G>0&&z&&z.length>0&&(0,s.jsxs)("div",{className:"mt-2 space-y-1",children:[z.filter(e=>"online"===e.status).slice(0,2).map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,s.jsxs)("span",{className:"text-muted-foreground font-medium",children:[e.deviceId||"Unknown",":"]}),(0,s.jsx)("span",{className:"text-emerald-600 font-semibold",children:e.ipAddress||"N/A"})]},e.deviceId||a)),z.filter(e=>"online"===e.status).length>2&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground font-medium",children:["+",z.filter(e=>"online"===e.status).length-2," lainnya"]})]}),(0,s.jsx)("div",{className:"w-full bg-muted/50 rounded-full h-1",children:(0,s.jsx)("div",{className:"h-1 rounded-full transition-all duration-300 ".concat(G>0?"bg-emerald-500 animate-pulse":"bg-red-500"),style:{width:_>0?"".concat(G/_*100,"%"):"0%"}})})]})})]})]}),ew.length>0&&(0,s.jsxs)(u.Fc,{className:"mb-6 sm:mb-8 shadow-xl border-0 bg-gradient-to-r from-red-50 via-orange-50 to-yellow-50 border-l-4 border-l-red-500",children:[(0,s.jsx)(p.A,{className:"h-5 w-5 text-red-600"}),(0,s.jsxs)(u.TN,{className:"text-sm",children:[(0,s.jsxs)("div",{className:"font-bold text-red-800 mb-2",children:["⚠️ ",ew.length," Item Memerlukan Perhatian"]}),(()=>{let e=ew.filter(e=>0===e.quantity),a=ew.filter(e=>e.quantity>0&&e.quantity<=e.minStock);return(0,s.jsxs)("div",{className:"space-y-3",children:[e.length>0&&(0,s.jsxs)("div",{className:"bg-red-100 rounded-lg p-3 border border-red-200",children:[(0,s.jsxs)("div",{className:"font-semibold text-red-800 mb-2 text-xs",children:["\uD83D\uDD34 HABIS TOTAL (",e.length," item)"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[e.slice(0,4).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between bg-white rounded px-2 py-1",children:[(0,s.jsx)("span",{className:"text-xs font-medium text-red-700 truncate",children:e.name}),(0,s.jsx)(x.E,{variant:"destructive",className:"text-xs",children:"0"})]},e.id)),e.length>4&&(0,s.jsxs)("div",{className:"text-xs text-red-600 font-medium col-span-full",children:["+",e.length-4," item lainnya"]})]})]}),a.length>0&&(0,s.jsxs)("div",{className:"bg-orange-100 rounded-lg p-3 border border-orange-200",children:[(0,s.jsxs)("div",{className:"font-semibold text-orange-800 mb-2 text-xs",children:["\uD83D\uDFE1 STOK RENDAH (",a.length," item)"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[a.slice(0,4).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between bg-white rounded px-2 py-1",children:[(0,s.jsx)("span",{className:"text-xs font-medium text-orange-700 truncate",children:e.name}),(0,s.jsxs)(x.E,{variant:"outline",className:"text-xs border-orange-300 text-orange-700",children:[e.quantity,"/",e.minStock]})]},e.id)),a.length>4&&(0,s.jsxs)("div",{className:"text-xs text-orange-600 font-medium col-span-full",children:["+",a.length-4," item lainnya"]})]})]})]})})()]})]}),(0,s.jsxs)(l.Zp,{className:"shadow-xl border-0 bg-white/80 backdrop-blur-sm",children:[(0,s.jsxs)(l.aR,{className:"bg-gradient-to-r from-slate-50 to-gray-50 border-b border-gray-100",children:[(0,s.jsxs)("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(l.ZB,{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent",children:["\uD83D\uDCE6 Inventaris (",eN.length,")"]}),(0,s.jsx)(l.BT,{className:"text-sm text-gray-600 font-medium mt-1",children:"Kelola dan pantau stok barang Anda"})]}),(0,s.jsxs)("div",{className:"flex flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-3",children:[(0,s.jsxs)(n.$,{onClick:()=>W(!0),size:"sm",className:"w-full sm:w-auto bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 text-sm px-4 py-2",children:[(0,s.jsx)(w.A,{className:"w-4 h-4 mr-2"}),(0,s.jsx)("span",{className:"sm:hidden",children:"Tambah"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Tambah Item"})]}),(0,s.jsxs)(n.$,{variant:"outline",onClick:ek,size:"sm",className:"w-full sm:w-auto glass-card hover:shadow-lg transition-all duration-300 text-sm px-4 py-2",children:[(0,s.jsx)(v.A,{className:"w-4 h-4 mr-2"}),(0,s.jsx)("span",{className:"sm:hidden",children:"Export"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Export CSV"})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col space-y-3 sm:flex-row sm:space-y-0 sm:space-x-4 bg-gradient-to-r from-blue-50/50 to-indigo-50/50 p-3 sm:p-4 rounded-lg border border-blue-100/50",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(k.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-500"}),(0,s.jsx)(c.p,{placeholder:"\uD83D\uDD0D Cari item...",value:ei,onChange:e=>er(e.target.value),className:"pl-10 bg-white/80 backdrop-blur-sm border-gray-200 focus:border-blue-400 focus:ring-blue-400 transition-all duration-200 text-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-2",children:[(0,s.jsxs)(o.l6,{value:el,onValueChange:en,children:[(0,s.jsxs)(o.bq,{className:"w-full sm:w-[150px] bg-white/80 backdrop-blur-sm border-gray-200 hover:border-blue-300 transition-all duration-200 text-sm",children:[(0,s.jsx)(N.A,{className:"h-4 w-4 mr-2 text-gray-500"}),(0,s.jsx)(o.yv,{placeholder:"Kategori"})]}),(0,s.jsx)(o.gC,{className:"bg-white/95 backdrop-blur-sm",children:ex.map(e=>(0,s.jsx)(o.eb,{value:e,className:"text-sm",children:"all"===e?"Semua Kategori":e},e))})]}),(0,s.jsxs)(o.l6,{value:ec,onValueChange:ed,children:[(0,s.jsx)(o.bq,{className:"w-full sm:w-[150px] bg-white/80 backdrop-blur-sm border-gray-200 hover:border-blue-300 transition-all duration-200 text-sm",children:(0,s.jsx)(o.yv,{placeholder:"Urutan"})}),(0,s.jsxs)(o.gC,{className:"bg-white/95 backdrop-blur-sm",children:[(0,s.jsx)(o.eb,{value:"name-asc",className:"text-sm",children:"Nama A-Z"}),(0,s.jsx)(o.eb,{value:"name-desc",className:"text-sm",children:"Nama Z-A"}),(0,s.jsx)(o.eb,{value:"quantity-asc",className:"text-sm",children:"Stok ↗"}),(0,s.jsx)(o.eb,{value:"quantity-desc",className:"text-sm",children:"Stok ↘"}),(0,s.jsx)(o.eb,{value:"price-asc",className:"text-sm",children:"Harga ↗"}),(0,s.jsx)(o.eb,{value:"price-desc",className:"text-sm",children:"Harga ↘"})]})]})]})]})]}),(0,s.jsxs)(l.Wu,{children:[(0,s.jsx)("div",{className:"block sm:hidden space-y-3",children:0===eN.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(y.A,{className:"h-16 w-16 mx-auto text-gray-300 mb-4"}),(0,s.jsx)("p",{className:"text-gray-500 font-medium",children:"Tidak ada item yang ditemukan"}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Coba ubah filter atau tambah item baru"})]}):eN.map(e=>(0,s.jsxs)("div",{className:"border rounded-xl p-4 bg-white shadow-sm hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 truncate text-sm",children:e.name}),(0,s.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.category}),e.barcode&&(0,s.jsx)("p",{className:"text-xs font-mono text-gray-400 mt-1",children:e.barcode})]}),(0,s.jsx)("div",{className:"flex items-center gap-1 ml-2",children:(0,s.jsx)(x.E,{variant:e.quantity<=e.minStock?"destructive":"default",className:"text-xs px-2 py-1",children:e.quantity})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500 block",children:"Harga:"}),(0,s.jsxs)("p",{className:"font-semibold text-emerald-600",children:["Rp ",e.price.toLocaleString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500 block",children:"Lokasi:"}),(0,s.jsx)("p",{className:"font-medium truncate",children:e.location||"-"})]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)(n.$,{variant:"outline",size:"sm",className:"px-2 py-1 h-8 text-xs",onClick:()=>{var a,t;return ea({...e,barcode:null!==(a=e.barcode)&&void 0!==a?a:"",supplier:null!==(t=e.supplier)&&void 0!==t?t:""})},children:(0,s.jsx)(b.A,{className:"h-3 w-3"})}),(0,s.jsx)(n.$,{variant:"outline",size:"sm",className:"px-2 py-1 h-8 text-xs",onClick:()=>{var a,t;return Y({...e,barcode:null!==(a=e.barcode)&&void 0!==a?a:"",supplier:null!==(t=e.supplier)&&void 0!==t?t:""})},children:(0,s.jsx)(j.A,{className:"h-3 w-3"})}),(0,s.jsx)(n.$,{variant:"destructive",size:"sm",className:"px-2 py-1 h-8 text-xs",onClick:()=>ej(e.id,e.name),children:(0,s.jsx)(C.A,{className:"h-3 w-3"})})]}),(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)(n.$,{variant:"outline",size:"sm",className:"px-2 py-1 h-8 text-xs bg-emerald-50 hover:bg-emerald-100 border-emerald-200",onClick:()=>es({itemId:e.id,itemName:e.name,currentQuantity:e.quantity,type:"add",amount:1}),children:(0,s.jsx)(w.A,{className:"h-3 w-3 text-emerald-600"})}),(0,s.jsx)(n.$,{variant:"outline",size:"sm",className:"px-2 py-1 h-8 text-xs bg-red-50 hover:bg-red-100 border-red-200",onClick:()=>es({itemId:e.id,itemName:e.name,currentQuantity:e.quantity,type:"subtract",amount:1}),disabled:e.quantity<=0,children:(0,s.jsx)(f.A,{className:"h-3 w-3 text-red-600"})})]})]})]},e.id))}),(0,s.jsx)("div",{className:"hidden sm:block",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(h.XI,{children:[(0,s.jsx)(h.A0,{children:(0,s.jsxs)(h.Hj,{children:[(0,s.jsx)(h.nd,{className:"min-w-[200px]",children:"Item"}),(0,s.jsx)(h.nd,{className:"min-w-[100px]",children:"Kategori"}),(0,s.jsx)(h.nd,{className:"text-center min-w-[80px]",children:"Stok"}),(0,s.jsx)(h.nd,{className:"text-right min-w-[120px]",children:"Harga"}),(0,s.jsx)(h.nd,{className:"min-w-[120px]",children:"Lokasi"}),(0,s.jsx)(h.nd,{className:"text-right min-w-[150px]",children:"Aksi"})]})}),(0,s.jsx)(h.BF,{children:0===eN.length?(0,s.jsx)(h.Hj,{children:(0,s.jsxs)(h.nA,{colSpan:6,className:"text-center py-8",children:[(0,s.jsx)(y.A,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Tidak ada item yang ditemukan"})]})}):eN.map(e=>{let a=e.quantity<=e.minStock,t=0===e.quantity;return(0,s.jsxs)(h.Hj,{className:"\n                              ".concat(t?"bg-red-50 border-l-4 border-l-red-500":a?"bg-orange-50 border-l-4 border-l-orange-400":"","\n                              transition-colors duration-200\n                            "),children:[(0,s.jsx)(h.nA,{children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(t?"bg-red-500 animate-pulse":a?"bg-orange-500 animate-pulse":"bg-green-500")}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[e.name,t&&(0,s.jsx)(x.E,{variant:"destructive",className:"text-xs",children:"HABIS"}),a&&!t&&(0,s.jsx)(x.E,{variant:"outline",className:"text-xs border-orange-400 text-orange-700",children:"RENDAH"})]}),(0,s.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-[200px]",title:e.description,children:e.description||"Tidak ada deskripsi"})]})]})}),(0,s.jsx)(h.nA,{children:e.category}),(0,s.jsx)(h.nA,{className:"text-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,s.jsx)(x.E,{variant:t?"destructive":a?"outline":"default",className:t?"bg-red-600":a?"border-orange-400 text-orange-700 bg-orange-50":"bg-green-100 text-green-800",children:e.quantity}),a&&(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["Min: ",e.minStock]})]})}),(0,s.jsxs)(h.nA,{className:"text-right font-medium",children:["Rp ",e.price.toLocaleString()]}),(0,s.jsx)(h.nA,{children:e.location}),(0,s.jsx)(h.nA,{className:"text-right",children:(0,s.jsxs)("div",{className:"flex justify-end space-x-1",children:[(0,s.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>{var a,t;return ea({...e,barcode:null!==(a=e.barcode)&&void 0!==a?a:"",supplier:null!==(t=e.supplier)&&void 0!==t?t:""})},title:"Lihat Detail",children:(0,s.jsx)(b.A,{className:"h-4 w-4"})}),(0,s.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>{var a,t;return Y({...e,barcode:null!==(a=e.barcode)&&void 0!==a?a:"",supplier:null!==(t=e.supplier)&&void 0!==t?t:""})},title:"Edit Item",children:(0,s.jsx)(j.A,{className:"h-4 w-4"})}),(0,s.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>es({itemId:e.id,itemName:e.name,currentQuantity:e.quantity,type:"add",amount:a?Math.max(2*e.minStock-e.quantity,5):1}),title:a?"Quick Restock":"Tambah Stok",className:a?"border-green-400 text-green-700 hover:bg-green-50":"",children:a?"⚡":(0,s.jsx)(w.A,{className:"h-4 w-4"})}),(0,s.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>es({itemId:e.id,itemName:e.name,currentQuantity:e.quantity,type:"subtract",amount:1}),title:"Kurangi Stok",disabled:e.quantity<=0,children:(0,s.jsx)(f.A,{className:"h-4 w-4"})}),(0,s.jsx)(n.$,{variant:"destructive",size:"sm",onClick:()=>ej(e.id,e.name),title:"Hapus Item",children:(0,s.jsx)(C.A,{className:"h-4 w-4"})})]})})]},e.id)})})]})})})]})]}),(0,s.jsx)(m.lG,{open:V,onOpenChange:W,children:(0,s.jsxs)(m.Cf,{className:"sm:max-w-[600px] max-h-[90vh] flex flex-col",children:[(0,s.jsxs)(m.c7,{className:"flex-shrink-0",children:[(0,s.jsx)(m.L3,{children:"Tambah Item Baru"}),(0,s.jsx)(m.rr,{children:"Masukkan detail item inventaris baru."})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto px-1",children:(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-2 sm:gap-4",children:[(0,s.jsx)(d.J,{htmlFor:"barcode",className:"sm:text-right",children:"Barcode"}),(0,s.jsx)(c.p,{id:"barcode",value:em.barcode,onChange:e=>eu({...em,barcode:e.target.value}),className:"sm:col-span-3",placeholder:"Scan atau ketik barcode"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-2 sm:gap-4",children:[(0,s.jsx)(d.J,{htmlFor:"name",className:"sm:text-right",children:"Nama *"}),(0,s.jsx)(c.p,{id:"name",value:em.name,onChange:e=>eu({...em,name:e.target.value}),className:"sm:col-span-3",placeholder:"Contoh: Coca Cola 330ml"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-2 sm:gap-4",children:[(0,s.jsx)(d.J,{htmlFor:"description",className:"sm:text-right",children:"Deskripsi"}),(0,s.jsx)(c.p,{id:"description",value:em.description,onChange:e=>eu({...em,description:e.target.value}),className:"sm:col-span-3",placeholder:"Detail singkat mengenai item"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-2 sm:gap-4",children:[(0,s.jsx)(d.J,{htmlFor:"category",className:"sm:text-right",children:"Kategori"}),(0,s.jsx)(c.p,{id:"category",value:em.category,onChange:e=>eu({...em,category:e.target.value}),className:"sm:col-span-3",placeholder:"Contoh: Minuman"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-2 sm:gap-4",children:[(0,s.jsx)(d.J,{htmlFor:"quantity",className:"sm:text-right",children:"Kuantitas"}),(0,s.jsx)(c.p,{id:"quantity",type:"number",value:em.quantity,onChange:e=>eu({...em,quantity:parseInt(e.target.value)||0}),className:"sm:col-span-3"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-2 sm:gap-4",children:[(0,s.jsx)(d.J,{htmlFor:"minStock",className:"sm:text-right",children:"Stok Min."}),(0,s.jsx)(c.p,{id:"minStock",type:"number",value:em.minStock,onChange:e=>eu({...em,minStock:parseInt(e.target.value)||0}),className:"sm:col-span-3"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-2 sm:gap-4",children:[(0,s.jsx)(d.J,{htmlFor:"price",className:"sm:text-right",children:"Harga (Rp)"}),(0,s.jsx)(c.p,{id:"price",type:"number",value:em.price,onChange:e=>eu({...em,price:parseFloat(e.target.value)||0}),className:"sm:col-span-3"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-2 sm:gap-4",children:[(0,s.jsx)(d.J,{htmlFor:"supplier",className:"sm:text-right",children:"Pemasok"}),(0,s.jsx)(c.p,{id:"supplier",value:em.supplier,onChange:e=>eu({...em,supplier:e.target.value}),className:"sm:col-span-3",placeholder:"Nama pemasok"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-center gap-2 sm:gap-4",children:[(0,s.jsx)(d.J,{htmlFor:"location",className:"sm:text-right",children:"Lokasi"}),(0,s.jsx)(c.p,{id:"location",value:em.location,onChange:e=>eu({...em,location:e.target.value}),className:"sm:col-span-3",placeholder:"Contoh: Rak A1"})]})]})}),(0,s.jsx)(m.Es,{className:"flex-shrink-0 bg-white border-t pt-4 mt-4",children:(0,s.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-2 sm:gap-2 w-full",children:[(0,s.jsx)(n.$,{variant:"outline",onClick:()=>W(!1),className:"w-full sm:w-auto",children:"Batal"}),(0,s.jsx)(n.$,{onClick:eg,className:"w-full sm:w-auto",children:"Simpan Item"})]})})]})}),(0,s.jsx)(m.lG,{open:!!X,onOpenChange:()=>Y(null),children:(0,s.jsxs)(m.Cf,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(m.c7,{children:[(0,s.jsx)(m.L3,{children:"Edit Item"}),(0,s.jsx)(m.rr,{children:"Perbarui informasi item inventaris."})]}),X&&(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(d.J,{htmlFor:"edit-barcode",className:"text-right",children:"Barcode"}),(0,s.jsx)(c.p,{id:"edit-barcode",value:null!==(e=X.barcode)&&void 0!==e?e:"",onChange:e=>Y({...X,barcode:e.target.value}),className:"col-span-3"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(d.J,{htmlFor:"edit-name",className:"text-right",children:"Nama Item"}),(0,s.jsx)(c.p,{id:"edit-name",value:X.name,onChange:e=>Y({...X,name:e.target.value}),className:"col-span-3"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(d.J,{htmlFor:"edit-description",className:"text-right",children:"Deskripsi"}),(0,s.jsx)(c.p,{id:"edit-description",value:X.description,onChange:e=>Y({...X,description:e.target.value}),className:"col-span-3"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(d.J,{htmlFor:"edit-category",className:"text-right",children:"Kategori"}),(0,s.jsx)(c.p,{id:"edit-category",value:X.category,onChange:e=>Y({...X,category:e.target.value}),className:"col-span-3"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(d.J,{htmlFor:"edit-quantity",className:"text-right",children:"Kuantitas"}),(0,s.jsx)(c.p,{id:"edit-quantity",type:"number",value:X.quantity,onChange:e=>Y({...X,quantity:parseInt(e.target.value)||0}),className:"col-span-3"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(d.J,{htmlFor:"edit-minStock",className:"text-right",children:"Stok Min."}),(0,s.jsx)(c.p,{id:"edit-minStock",type:"number",value:X.minStock,onChange:e=>Y({...X,minStock:parseInt(e.target.value)||0}),className:"col-span-3"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(d.J,{htmlFor:"edit-price",className:"text-right",children:"Harga (Rp)"}),(0,s.jsx)(c.p,{id:"edit-price",type:"number",value:X.price,onChange:e=>Y({...X,price:parseFloat(e.target.value)||0}),className:"col-span-3"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(d.J,{htmlFor:"edit-supplier",className:"text-right",children:"Pemasok"}),(0,s.jsx)(c.p,{id:"edit-supplier",value:null!==(a=X.supplier)&&void 0!==a?a:"",onChange:e=>Y({...X,supplier:e.target.value}),className:"col-span-3"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(d.J,{htmlFor:"edit-location",className:"text-right",children:"Lokasi"}),(0,s.jsx)(c.p,{id:"edit-location",value:X.location,onChange:e=>Y({...X,location:e.target.value}),className:"col-span-3"})]})]}),(0,s.jsxs)(m.Es,{children:[(0,s.jsx)(n.$,{variant:"outline",onClick:()=>Y(null),children:"Batal"}),(0,s.jsx)(n.$,{onClick:ev,children:"Simpan Perubahan"})]})]})}),(0,s.jsx)(m.lG,{open:!!ee,onOpenChange:()=>ea(null),children:(0,s.jsxs)(m.Cf,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)(m.c7,{children:(0,s.jsx)(m.L3,{children:"Detail Item"})}),ee&&(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:ee.barcode?(0,s.jsx)(q(),{value:ee.barcode,height:60,displayValue:!1}):(0,s.jsx)("p",{className:"text-gray-500",children:"Tidak ada barcode"})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d.J,{className:"text-sm font-medium text-gray-500",children:"Nama Item"}),(0,s.jsx)("p",{className:"text-lg font-semibold",children:ee.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.J,{className:"text-sm font-medium text-gray-500",children:"Kategori"}),(0,s.jsx)("p",{children:ee.category})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.J,{className:"text-sm font-medium text-gray-500",children:"Stok Saat Ini"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:ee.quantity})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.J,{className:"text-sm font-medium text-gray-500",children:"Stok Minimum"}),(0,s.jsx)("p",{children:ee.minStock})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.J,{className:"text-sm font-medium text-gray-500",children:"Harga"}),(0,s.jsxs)("p",{className:"text-lg font-semibold",children:["Rp ",ee.price.toLocaleString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.J,{className:"text-sm font-medium text-gray-500",children:"Barcode"}),(0,s.jsx)("p",{className:"font-mono",children:ee.barcode||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.J,{className:"text-sm font-medium text-gray-500",children:"Pemasok"}),(0,s.jsx)("p",{children:ee.supplier||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.J,{className:"text-sm font-medium text-gray-500",children:"Lokasi"}),(0,s.jsx)("p",{children:ee.location||"-"})]})]}),(0,s.jsxs)("div",{className:"pt-2 border-t",children:[(0,s.jsx)(d.J,{className:"text-sm font-medium text-gray-500",children:"Deskripsi"}),(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:ee.description||"Tidak ada deskripsi."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.J,{className:"text-sm font-medium text-gray-500",children:"Total Nilai Stok Item Ini"}),(0,s.jsxs)("p",{className:"text-xl font-bold text-blue-600",children:["Rp ",(ee.quantity*ee.price).toLocaleString()]})]}),ee.lastUpdated&&(0,s.jsxs)("div",{children:[(0,s.jsx)(d.J,{className:"text-sm font-medium text-gray-500",children:"Update Terakhir"}),(0,s.jsx)("p",{children:new Date(ee.lastUpdated).toLocaleString()})]})]}),(0,s.jsx)(m.Es,{children:(0,s.jsx)(n.$,{onClick:()=>ea(null),children:"Tutup"})})]})}),(0,s.jsx)(m.lG,{open:!!et,onOpenChange:()=>es(null),children:(0,s.jsxs)(m.Cf,{className:"sm:max-w-md",children:[(0,s.jsxs)(m.c7,{children:[(0,s.jsxs)(m.L3,{children:[(null==et?void 0:et.type)==="add"?"Tambah":"Kurangi"," Stok: ",null==et?void 0:et.itemName]}),(0,s.jsxs)(m.rr,{children:["Stok saat ini: ",null==et?void 0:et.currentQuantity,". Masukkan jumlah untuk penyesuaian."]})]}),et&&(0,s.jsxs)("div",{className:"py-4",children:[(0,s.jsx)(d.J,{htmlFor:"adjustment-amount",children:"Jumlah"}),(0,s.jsx)(c.p,{id:"adjustment-amount",type:"number",min:"1",value:et.amount,onChange:e=>es({...et,amount:parseInt(e.target.value)||1})})]}),(0,s.jsxs)(m.Es,{children:[(0,s.jsx)(n.$,{variant:"outline",onClick:()=>es(null),children:"Batal"}),(0,s.jsx)(n.$,{onClick:eb,children:(null==et?void 0:et.type)==="add"?"Tambah Stok":"Kurangi Stok"})]})]})})]})})}},6288:(e,a,t)=>{"use strict";t.d(a,{X:()=>s.A});var s=t(4416)},6889:(e,a,t)=>{"use strict";t.d(a,{Jl:()=>s.A,rX:()=>r.A,yQ:()=>i.A});var s=t(5196),i=t(6474),r=t(7863)}},e=>{var a=a=>e(e.s=a);e.O(0,[6209,8779,4313,5180,9290,622,2432,7979,1899,9744,2322,9592,7940,2652,5030,465,3719,408,9741,9473,9219,7499,7358],()=>a(1319)),_N_E=e.O()}]);