(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1370],{183:(e,a,s)=>{Promise.resolve().then(s.bind(s,7466))},7466:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>w});var t=s(5155),i=s(2115),n=s(8482),r=s(7168),l=s(9852),c=s(2714),m=s(9474),d=s(88),o=s(4964),x=s(8145),h=s(4213),p=s(1788),u=s(3904),g=s(381),j=s(5525),N=s(6517),y=s(4449),v=s(3580),b=s(2464),k=s(1115),f=s(8915);function w(){let[e,a]=(0,i.useState)({companyName:"StokManager",companyAddress:"Jl. Contoh No. 123, Jakarta",companyPhone:"+62 21 1234567",companyEmail:"info@stokmanager.com",lowStockThreshold:"5",autoBackup:!0,notifications:!0,emailNotifications:!0,scannerTimeout:"30",autoScanMode:!0,scannerSound:!0,sessionTimeout:"60",requirePasswordChange:!1,twoFactorAuth:!1}),[s,w]=(0,i.useState)(!0),[S,P]=(0,i.useState)(!1),{devices:C,loading:T,error:A}=(0,b.C6)(),{toast:E}=(0,v.dj)();(0,i.useEffect)(()=>{(async()=>{if(!f.OO){E({title:"Error",description:"Koneksi Firebase tidak tersedia",variant:"destructive"}),w(!1);return}try{let e=(0,k.KR)(f.OO,"settings/system"),s=(await (0,k.Jt)(e)).val();s&&(a(e=>({...e,...s})),E({title:"Pengaturan Dimuat",description:"Pengaturan berhasil dimuat dari database"}))}catch(e){console.error("Error loading settings:",e),E({title:"Error",description:"Gagal memuat pengaturan dari Firebase",variant:"destructive"})}finally{w(!1)}})()},[E]);let K=async()=>{if(!f.OO){E({title:"Error",description:"Koneksi Firebase tidak tersedia",variant:"destructive"});return}P(!0);try{let a=(0,k.KR)(f.OO,"settings/system");await (0,k.hZ)(a,{...e,lastUpdated:Date.now()}),E({title:"Berhasil",description:"Pengaturan berhasil disimpan ke Firebase"})}catch(e){console.error("Error saving settings:",e),E({title:"Error",description:"Gagal menyimpan pengaturan ke Firebase",variant:"destructive"})}finally{P(!1)}},O=async()=>{if(!f.OO){E({title:"Error",description:"Koneksi Firebase tidak tersedia",variant:"destructive"});return}E({title:"Backup Dimulai",description:"Proses backup sedang berjalan..."});try{let a=(0,k.KR)(f.OO,"backups/".concat(Date.now())),s=(0,k.KR)(f.OO,"inventory"),t=await (0,k.Jt)(s),i=(0,k.KR)(f.OO,"scans"),n=await (0,k.Jt)(i),r={timestamp:Date.now(),inventory:t.val()||{},scans:n.val()||{},settings:e};await (0,k.hZ)(a,r),E({title:"Backup Selesai",description:"Data berhasil di-backup ke Firebase"})}catch(e){console.error("Backup error:",e),E({title:"Backup Gagal",description:"Terjadi kesalahan saat backup data",variant:"destructive"})}},B=async e=>{if(!f.OO){E({title:"Error",description:"Koneksi Firebase tidak tersedia",variant:"destructive"});return}E({title:"Restart Device",description:"Mengirim perintah restart ke ".concat(e,"...")});try{let a=(0,k.KR)(f.OO,"devices/".concat(e,"/commands"));await (0,k.hZ)(a,{action:"restart",timestamp:Date.now()}),E({title:"Perintah Terkirim",description:"Perintah restart berhasil dikirim ke ".concat(e)})}catch(e){E({title:"Error",description:"Gagal mengirim perintah restart",variant:"destructive"})}},M=e=>e?new Date(e).toLocaleString("id-ID"):"Tidak tersedia",F=e=>e.lastSeen&&Date.now()-new Date(e.lastSeen).getTime()<6e4||"online"===e.status?(0,t.jsx)(x.E,{variant:"default",className:"bg-green-500",children:"Online"}):(0,t.jsx)(x.E,{variant:"secondary",children:"Offline"});return s?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:"w-10 h-10 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Memuat pengaturan..."})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50/30 mobile-container",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto mobile-safe-area py-4 sm:py-8",children:[(0,t.jsx)("div",{className:"mb-4 sm:mb-6 lg:mb-8",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[(0,t.jsx)("div",{className:"p-2 sm:p-3 rounded-xl bg-gradient-to-r from-purple-500 to-blue-600 text-white shadow-lg flex-shrink-0",children:(0,t.jsx)(g.A,{className:"h-5 w-5 sm:h-6 sm:w-6"})}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("h1",{className:"text-lg sm:text-2xl lg:text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent mobile-text",children:"Pengaturan Sistem"}),(0,t.jsx)("p",{className:"text-xs sm:text-sm lg:text-base text-gray-600 mt-1 mobile-text",children:"Konfigurasi aplikasi dan perangkat"})]})]})}),(0,t.jsxs)(o.tU,{defaultValue:"general",className:"space-y-3 sm:space-y-4 lg:space-y-6",children:[(0,t.jsx)("div",{className:"w-full",children:(0,t.jsxs)(o.j7,{className:"grid w-full grid-cols-3 bg-white/80 backdrop-blur-sm border border-gray-200/50 shadow-lg rounded-xl p-1 gap-1 h-auto",children:[(0,t.jsx)(o.Xi,{value:"general",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-500 data-[state=active]:to-blue-600 data-[state=active]:text-white rounded-lg transition-all duration-200 text-xs sm:text-sm px-1 sm:px-2 py-2 min-h-[40px] flex items-center justify-center",children:(0,t.jsx)("span",{className:"truncate",children:"Umum"})}),(0,t.jsx)(o.Xi,{value:"devices",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-500 data-[state=active]:to-blue-600 data-[state=active]:text-white rounded-lg transition-all duration-200 text-xs sm:text-sm px-1 sm:px-2 py-2 min-h-[40px] flex items-center justify-center",children:(0,t.jsx)("span",{className:"truncate",children:"Perangkat"})}),(0,t.jsx)(o.Xi,{value:"security",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-500 data-[state=active]:to-blue-600 data-[state=active]:text-white rounded-lg transition-all duration-200 text-xs sm:text-sm px-1 sm:px-2 py-2 min-h-[40px] flex items-center justify-center",children:(0,t.jsx)("span",{className:"truncate",children:"Keamanan"})})]})}),(0,t.jsx)(o.av,{value:"general",children:(0,t.jsxs)(n.Zp,{className:"glass-card border-gray-200/50",children:[(0,t.jsxs)(n.aR,{className:"border-b border-gray-100 p-4 sm:p-6",children:[(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2 sm:gap-3 text-base sm:text-lg font-semibold text-gray-900",children:[(0,t.jsx)("div",{className:"p-1.5 sm:p-2 rounded-lg bg-gradient-to-r from-blue-500 to-indigo-600 flex-shrink-0",children:(0,t.jsx)(g.A,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),(0,t.jsx)("span",{className:"truncate",children:"Pengaturan Umum"})]}),(0,t.jsx)(n.BT,{className:"text-gray-600 text-sm",children:"Konfigurasi informasi perusahaan dan pengaturan dasar"})]}),(0,t.jsxs)(n.Wu,{className:"space-y-4 sm:space-y-6 p-3 sm:p-4 lg:p-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 sm:gap-4 lg:gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{htmlFor:"companyName",className:"text-sm font-medium",children:"Nama Perusahaan"}),(0,t.jsx)(l.p,{id:"companyName",value:e.companyName,onChange:s=>a({...e,companyName:s.target.value}),placeholder:"Masukkan nama perusahaan",className:"text-sm mobile-input"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{htmlFor:"companyPhone",className:"text-sm font-medium",children:"Nomor Telepon"}),(0,t.jsx)(l.p,{id:"companyPhone",value:e.companyPhone,onChange:s=>a({...e,companyPhone:s.target.value}),placeholder:"Masukkan nomor telepon",className:"text-sm mobile-input",type:"tel"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{htmlFor:"companyEmail",className:"text-sm font-medium",children:"Email"}),(0,t.jsx)(l.p,{id:"companyEmail",type:"email",value:e.companyEmail,onChange:s=>a({...e,companyEmail:s.target.value}),placeholder:"Masukkan email perusahaan",className:"text-sm mobile-input"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{htmlFor:"lowStockThreshold",className:"text-sm font-medium",children:"Batas Stok Rendah"}),(0,t.jsx)(l.p,{id:"lowStockThreshold",type:"number",value:e.lowStockThreshold,onChange:s=>a({...e,lowStockThreshold:s.target.value}),placeholder:"5",className:"text-sm mobile-input"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{htmlFor:"companyAddress",className:"text-sm font-medium",children:"Alamat Perusahaan"}),(0,t.jsx)(m.T,{id:"companyAddress",value:e.companyAddress,onChange:s=>a({...e,companyAddress:s.target.value}),placeholder:"Masukkan alamat lengkap perusahaan",rows:3,className:"text-sm mobile-input resize-none"})]}),(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsx)(r.$,{onClick:K,disabled:S,className:"w-full sm:w-auto btn-mobile",children:S?"Menyimpan...":"Simpan Pengaturan"})})]})]})}),(0,t.jsx)(o.av,{value:"devices",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(N.A,{className:"w-5 h-5"}),"Manajemen Perangkat"]}),(0,t.jsx)(n.BT,{children:"Kelola perangkat ESP32 scanner yang terhubung"})]}),(0,t.jsx)(n.Wu,{children:T?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"text-gray-500 mt-4",children:"Memuat data perangkat..."})]}):A?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(y.A,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),(0,t.jsx)("p",{className:"text-red-500",children:"Error memuat data perangkat"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:A})]}):C&&0!==C.length?(0,t.jsx)("div",{className:"space-y-4",children:C.map((e,a)=>(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-4 border rounded-lg space-y-3 sm:space-y-0 sm:space-x-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4 min-w-0 flex-1",children:[(0,t.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(N.A,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600"})}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("h3",{className:"font-medium text-sm sm:text-base truncate",children:e.deviceId||"ESP32-".concat(a+1)}),(0,t.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500 truncate",children:["IP: ",e.ipAddress||"Tidak tersedia"]}),(0,t.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500 truncate",children:["Terakhir aktif: ",M(e.lastSeen)]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between sm:justify-end gap-3 sm:gap-4",children:[(0,t.jsxs)("div",{className:"text-left sm:text-right flex-1 sm:flex-none",children:[F(e),(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:block gap-1 sm:gap-0 mt-1",children:[(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Uptime: ",e.uptime?"".concat(Math.floor(e.uptime/3600),"h"):"N/A"]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Ver: ",e.version||"Unknown"]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 col-span-2 sm:col-span-1",children:["Heap: ",e.freeHeap?"".concat(Math.floor(e.freeHeap/1024),"KB"):"N/A"]})]})]}),(0,t.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>B(e.deviceId||"Device-".concat(a+1)),disabled:!("online"===e.status||e.lastSeen&&Date.now()-new Date(e.lastSeen).getTime()<6e4),className:"flex-shrink-0",children:(0,t.jsx)(u.A,{className:"w-4 h-4"})})]})]},e.deviceId||a))}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(y.A,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Tidak ada perangkat ESP32 yang terdaftar"}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Perangkat akan muncul secara otomatis saat mengirim heartbeat pertama"})]})})]}),(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsx)(n.ZB,{children:"Pengaturan Scanner"}),(0,t.jsx)(n.BT,{children:"Konfigurasi perilaku scanner ESP32"})]}),(0,t.jsxs)(n.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{htmlFor:"scannerTimeout",children:"Timeout Scanner (detik)"}),(0,t.jsx)(l.p,{id:"scannerTimeout",type:"number",value:e.scannerTimeout,onChange:s=>a({...e,scannerTimeout:s.target.value}),placeholder:"30"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(c.J,{children:"Mode Auto Scan"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Scan otomatis saat barcode terdeteksi"})]}),(0,t.jsx)(d.d,{checked:e.autoScanMode,onCheckedChange:s=>a({...e,autoScanMode:s})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(c.J,{children:"Suara Scanner"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Bunyi beep saat scan berhasil"})]}),(0,t.jsx)(d.d,{checked:e.scannerSound,onCheckedChange:s=>a({...e,scannerSound:s})})]})]}),(0,t.jsx)(r.$,{onClick:K,disabled:S,children:S?"Menyimpan...":"Simpan Pengaturan Scanner"})]})]})]})}),(0,t.jsx)(o.av,{value:"security",children:(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(n.Zp,{className:"glass-card border-gray-200/50",children:[(0,t.jsxs)(n.aR,{className:"border-b border-gray-100 p-4 sm:p-6",children:[(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2 sm:gap-3 text-base sm:text-lg font-semibold text-gray-900",children:[(0,t.jsx)("div",{className:"p-1.5 sm:p-2 rounded-lg bg-gradient-to-r from-red-500 to-pink-600 flex-shrink-0",children:(0,t.jsx)(j.A,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),(0,t.jsx)("span",{className:"truncate",children:"Pengaturan Keamanan"})]}),(0,t.jsx)(n.BT,{className:"text-gray-600 text-sm",children:"Konfigurasi keamanan sistem dan kontrol akses"})]}),(0,t.jsxs)(n.Wu,{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{htmlFor:"sessionTimeout",className:"text-sm font-medium",children:"Session Timeout (menit)"}),(0,t.jsx)(l.p,{id:"sessionTimeout",type:"number",value:e.sessionTimeout,onChange:s=>a({...e,sessionTimeout:s.target.value}),placeholder:"60",className:"text-sm mobile-input"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(c.J,{className:"text-sm font-medium",children:"Wajib Ganti Password"}),(0,t.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:"Paksa user ganti password berkala"})]}),(0,t.jsx)(d.d,{checked:e.requirePasswordChange,onCheckedChange:s=>a({...e,requirePasswordChange:s})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(c.J,{className:"text-sm font-medium",children:"Two-Factor Authentication"}),(0,t.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:"Aktifkan 2FA untuk keamanan extra"})]}),(0,t.jsx)(d.d,{checked:e.twoFactorAuth,onCheckedChange:s=>a({...e,twoFactorAuth:s})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(c.J,{className:"text-sm font-medium",children:"Notifikasi Keamanan"}),(0,t.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:"Alert untuk aktivitas mencurigakan"})]}),(0,t.jsx)(d.d,{checked:e.notifications,onCheckedChange:s=>a({...e,notifications:s})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(c.J,{className:"text-sm font-medium",children:"Auto Backup Keamanan"}),(0,t.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:"Backup otomatis data keamanan"})]}),(0,t.jsx)(d.d,{checked:e.autoBackup,onCheckedChange:s=>a({...e,autoBackup:s})})]})]})]}),(0,t.jsxs)("div",{className:"border-t pt-4 sm:pt-6",children:[(0,t.jsx)("h4",{className:"text-sm font-medium mb-3 text-gray-900",children:"Tindakan Keamanan"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[(0,t.jsxs)(r.$,{variant:"outline",className:"flex items-center gap-2 btn-mobile justify-start",onClick:()=>{E({title:"Mengecek Keamanan",description:"Memulai audit keamanan sistem..."})},children:[(0,t.jsx)(j.A,{className:"w-4 h-4"}),"Audit Keamanan"]}),(0,t.jsxs)(r.$,{variant:"outline",className:"flex items-center gap-2 btn-mobile justify-start",onClick:()=>{E({title:"Log Keamanan",description:"Membuka log aktivitas keamanan..."})},children:[(0,t.jsx)(h.A,{className:"w-4 h-4"}),"Log Aktivitas"]}),(0,t.jsxs)(r.$,{variant:"outline",className:"flex items-center gap-2 btn-mobile justify-start",onClick:O,children:[(0,t.jsx)(p.A,{className:"w-4 h-4"}),"Backup Data"]})]})]}),(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsx)(r.$,{onClick:K,disabled:S,className:"w-full sm:w-auto btn-mobile",children:S?"Menyimpan...":"Simpan Pengaturan Keamanan"})})]})]})})})]})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[6209,8779,4313,5180,9290,622,2432,7979,1899,9744,2322,9592,7940,2652,5030,465,3719,408,9741,9473,9219,7499,7358],()=>a(183)),_N_E=e.O()}]);